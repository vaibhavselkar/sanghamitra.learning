<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Arithmetic</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="../assets/img/favicon.png" rel="icon">
  <link href="../assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="../assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Mentor
  * Template URL: https://bootstrapmade.com/mentor-free-education-bootstrap-theme/
  * Updated: Mar 19 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Arithmetic</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="../assets/img/favicon.png" rel="icon">
  <link href="../assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="../assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Mentor
  * Template URL: https://bootstrapmade.com/mentor-free-education-bootstrap-theme/
  * Updated: Mar 19 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>
<style>
    /* ======================
     Core Multiplication Styles
     ====================== */
     :root {
        --primary-color: #007bff;
        --secondary-color: #0056b3;
        --correct-color: #28a745;
        --incorrect-color: #dc3545;
        --text-color: #2d3436;
    }
  
    /* Card System */
    .grade-section .card {
        border: 2px solid var(--primary-color);
        border-radius: 15px;
        margin-bottom: 25px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }

    .grade-section .card-header {
        background: var(--primary-color) !important;
        border-radius: 15px 15px 0 0 !important;
        padding: 1.2rem;
    }
  
    .grade-section .card-header h3 {
      color: white;
      font-weight: 600;
      margin: 0;
      font-size: 1.4rem;
    }
  
    /* Question Interface */
    .question-card, .progress-card {
      height: 500px;
      overflow-y: auto;
    }
  
    .math-problem {
      font-family: 'Courier New', Courier, monospace;
      width: fit-content;
      margin: 0 auto;
      padding: 1rem;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      font-size: 1.2rem;
    }
  
    /* Question Navigation */
    #questionNavigation {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
      gap: 0.5rem;
      padding: 1rem 0;
    }
  
    .question-number {
      padding: 10px;
      margin: 5px;
      border: 2px solid #dee2e6;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
      background: white;
      position: relative;
      min-width: 45px;
    }
  
    .question-number:hover {
      transform: translateY(-2px);
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
  
    .question-number.active {
        border-color: var(--primary-color);
        background-color: var(--primary-color);
    }
  
    .question-number.answered.correct {
      background: var(--correct-color) !important;
      border-color: var(--correct-color) !important;
      color: white !important;
    }
  
    .question-number.answered.incorrect {
      background: var(--incorrect-color) !important;
      border-color: var(--incorrect-color) !important;
      color: white !important;
    }
  
    .question-number.answered::after {
      content: "";
      position: absolute;
      top: 2px;
      right: 2px;
      font-size: 0.8em;
    }
  
    .question-number.answered.correct::after {
      content: "‚úì";
    }
  
    .question-number.answered.incorrect::after {
      content: "‚úó";
    }
  
    /* Progress System */
    .progress {
      height: 1.5rem;
      border-radius: 10px;
      background-color: #e9ecef;
      overflow: visible;
    }
  
    .progress-bar {
        background-color: var(--primary-color);
    }
  
    /* Answer States */
    .options-container button {
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
  
    .options-container button:not(:disabled):hover {
      transform: translateY(-2px);
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
  
    .options-container button.selected-answer {
        border: 2px solid var(--primary-color) !important;
        background-color: rgba(0, 123, 255, 0.1) !important;
    }

    .btn-primary {
        background-color: var(--primary-color) !important;
        border-color: var(--primary-color) !important;
    }
  
    .btn-success {
      background-color: var(--correct-color) !important;
      border-color: var(--correct-color) !important;
    }
  
    .btn-danger {
      background-color: var(--incorrect-color) !important;
      border-color: var(--incorrect-color) !important;
    }
  
    /* Responsive Design */
    @media (max-width: 768px) {
      .question-card, .progress-card {
        height: auto;
        margin-bottom: 1.5rem;
      }
      
      #questionNavigation {
        grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
      }
      
      .math-problem {
        transform: scale(0.9);
      }
    }
  
    /* Multiplication-specific Visuals */
    .carry-number {
        color: var(--primary-color);
    }

    .partial-product {
        border-top: 2px dashed var(--primary-color);
    }
  </style>
<body>

    <header id="header" class="header d-flex align-items-center sticky-top">
      <div class="container-fluid container-xl position-relative d-flex align-items-center">
  
        <a href="../index.html" class="logo d-flex align-items-center me-auto">
          <!-- Uncomment the line below if you also wish to use an image logo -->
          <img src="../img/sbi.logo.png" alt="Logo" width="80" height="80"> 
          <h1 class="">Sanghamitra Learning</h1>
        </a>
  
        <nav id="navmenu" class="navmenu">
          <div id="navbar-placeholder"></div>
          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        </nav>
  
      </div>
    </header>
  
    <main class="main">
  
      <!-- Page Title -->
      <div class="page-title" data-aos="fade" style="margin-bottom: 2rem;">
        <div class="heading">
          <div class="container">
            <div class="row d-flex justify-content-center text-center">
              <div class="col-lg-8">
                <h1>Dealing With Negative Sign</h1>
                <p class="mb-0">The guide and practice problems will help you to gain profound understanding of using negative sign and what common mistakes people do. So you can avoid making them and do good at dealing with negative signs.</p>
              </div>
            </div>
          </div>
        </div>
        <nav class="breadcrumbs">
          <div class="container">
            <ol>
              <li><a href="../index.html">Home</a></li>
              <li><a href="arithmetic.html">Arithmetic</a></li>
              <li class="current">Dealing With Negative Sign</li>
            </ol>
          </div>
        </nav>
      </div><!-- End Page Title -->

      <section class="intro-section py-5">
        <div class="container">
          <div class="row">
            <div class="col-lg-12 text-center">
              <h2 class="mb-4">‚ûñ Conquering Negative Signs! üß†</h2>
              <p class="lead">Master the mysteries of minus signs! üîç</p>
            </div>
          </div>
        </div>
      </section>
    
      <section class="common-mistakes py-5 bg-light">
        <div class="container">
          <!-- Mistake 1 -->
          <div class="row mb-5">
            <div class="col-lg-12">
              <div class="card shadow">
                <div class="card-header bg-danger text-white">
                  <h3>‚õî Misplaced Negative Signs</h3>
                </div>
                <div class="card-body">
                  <p class="fs-5">Is it ‚àí5¬≤ or (‚àí5)¬≤?</p>
                  <div class="math-problem">
                    <div class="d-flex gap-3">
                      <div>
                        <p class="text-danger">Common mistake:<br>
                        ‚àí5¬≤ = 25 ‚ùå<br>
                        (‚àí5)¬≤ = 25 ‚úÖ</p>
                      </div>
                    </div>
                  </div>
                  <div class="alert alert-warning mt-3">
                    <i class="bi bi-exclamation-triangle"></i> Remember: The exponent applies before the negative unless there's parentheses!
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          <!-- Mistake 2 -->
          <div class="row mb-5">
            <div class="col-lg-12">
              <div class="card shadow">
                <div class="card-header bg-danger text-white">
                  <h3>‚ûñ Subtraction Confusion</h3>
                </div>
                <div class="card-body">
                  <p class="fs-5">Subtracting negatives vs adding positives</p>
                  <pre class="bg-dark text-white p-3 rounded">
        5 ‚àí (‚àí3) = 8 ‚úÖ
        (Not 2 ‚ùå)</pre>
                  <div class="alert alert-info mt-3">
                    <i class="bi bi-lightbulb"></i> Tip: Two negatives make a positive! ‚ûï
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          <!-- Mistake 3 -->
          <div class="row mb-5">
            <div class="col-lg-12">
              <div class="card shadow">
                <div class="card-header bg-danger text-white">
                  <h3>‚úñÔ∏è Multiplication Rules</h3>
                </div>
                <div class="card-body">
                  <p>Sign rules for multiplication:</p>
                  <div class="math-problem">
                    <div class="row">
                      <div class="col-md-6">
                        <p>‚àí4 √ó ‚àí5 = 20 ‚úÖ<br>
                        (Not ‚àí20 ‚ùå)</p>
                      </div>
                      <div class="col-md-6">
                        <p>‚àí3 √ó 6 = ‚àí18 ‚úÖ<br>
                        (Not 18 ‚ùå)</p>
                      </div>
                    </div>
                  </div>
                  <div class="alert alert-success mt-3">
                    üéì Memory trick: Same signs = Positive, Different signs = Negative!
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          <!-- Mistake 4 -->
          <div class="row mb-5">
            <div class="col-lg-12">
              <div class="card shadow">
                <div class="card-header bg-danger text-white">
                  <h3>üì¶ Distribution Errors</h3>
                </div>
                <div class="card-body">
                  <p>Don't forget to distribute the negative!</p>
                  <div class="math-problem">
                    <div class="row">
                      <div class="col-md-6">
                        <p class="text-danger">Common mistake:<br>
                        ‚àí(x + 2) = ‚àíx + 2 ‚ùå</p>
                      </div>
                      <div class="col-md-6">
                        <p class="text-success">Correct version:<br>
                        ‚àí(x + 2) = ‚àíx ‚àí 2 ‚úÖ</p>
                      </div>
                    </div>
                  </div>
                  <div class="alert alert-primary mt-3">
                    <i class="bi bi-clipboard-check"></i> Remember: The negative sign affects ALL terms inside the parentheses!
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          <!-- Mistake 5 -->
          <div class="row mb-5">
            <div class="col-lg-12">
              <div class="card shadow">
                <div class="card-header bg-danger text-white">
                  <h3>‚ûï Combining Like Terms</h3>
                </div>
                <div class="card-body">
                  <p>Watch those signs when combining!</p>
                  <div class="math-problem">
                    <div class="row">
                      <div class="col-md-6">
                        <p class="text-danger">Common mistake:<br>
                        3x ‚àí (2x + 4) = x + 4 ‚ùå</p>
                      </div>
                      <div class="col-md-6">
                        <p class="text-success">Correct version:<br>
                        3x ‚àí 2x ‚àí 4 = x ‚àí 4 ‚úÖ</p>
                      </div>
                    </div>
                  </div>
                  <div class="alert alert-warning mt-3">
                    <i class="bi bi-exclamation-octagon"></i> Pro Tip: Use parentheses when substituting negative values!
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    
      <section class="real-life-examples py-5 bg-white">
        <div class="container">
          <h2 class="text-center mb-4">üå°Ô∏è Real-World Negative Scenarios üè¶</h2>
          
          <!-- Temperature Example -->
          <div class="row mb-4">
            <div class="col-lg-12">
              <div class="p-3 rounded" style="background: #cfe2ff;">
                <h4><i class="bi bi-thermometer-snow me-2"></i> Temperature Math</h4>
                <p class="fs-5">
                  If it's ‚àí5¬∞C and drops 3¬∞C: ‚àí5 ‚àí 3 = ‚àí8¬∞C ‚ùÑÔ∏è<br>
                  If it rises 7¬∞C: ‚àí5 + 7 = 2¬∞C üå§Ô∏è
                </p>
              </div>
            </div>
          </div>
    
          <!-- Financial Example -->
          <div class="row mb-4">
            <div class="col-lg-12">
              <div class="p-3 rounded" style="background: #fff3cd;">
                <h4><i class="bi bi-cash-coin me-2"></i> Banking Math</h4>
                <p class="fs-5">
                  Account balance: ‚Çπ500 ‚àí (‚àí‚Çπ200) = ‚Çπ700 üí∞<br>
                  (Forgiving ‚Çπ200 debt = Adding ‚Çπ200)
                </p>
              </div>
            </div>
          </div>
    
          <!-- Elevation Example -->
          <div class="row">
            <div class="col-lg-12">
              <div class="p-3 rounded" style="background: #d1e7dd;">
                <h4><i class="bi bi-geo-alt me-2"></i> Elevation Math</h4>
                <p class="fs-5">
                  Death Valley: ‚àí86m üèúÔ∏è<br>
                  Climbing 100m: ‚àí86 + 100 = 14m above sea level ‚õ∞Ô∏è
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>
    
      <section class="practice-section py-5">
        <div class="container text-center">
          <h3 class="mb-4">üìù Practice: Spot the Mistakes! üîç</h3>
          <div class="row">
            <div class="col-md-4 mb-4">
                <div class="p-3 border rounded bg-light">
                    <p>‚àí4¬≤ = 16?</p>
                    <button class="btn btn-danger">Reveal Truth</button>
                    <div class="answer mt-2 d-none">‚ùå False! ‚àí4¬≤ = ‚àí16<br>‚úÖ (‚àí4)¬≤ = 16</div>
                  </div>
            </div>
            <div class="col-md-4 mb-4">
              <div class="p-3 border rounded bg-light">
                <p>5 ‚àí (‚àí3) = 2?</p>
                <button class="btn btn-danger">Show Correct</button>
                <div class="answer mt-2 d-none">‚ùå Wrong! 5 ‚àí (‚àí3) = 8<br>‚úÖ Two negatives make positive!</div>
              </div>
            </div>
            <div class="col-md-4 mb-4">
              <div class="p-3 border rounded bg-light">
                <p>‚àí(x ‚àí 2) = ‚àíx ‚àí 2?</p>
                <button class="btn btn-danger">Fix It</button>
                <div class="answer mt-2 d-none">‚ùå Error!<br>‚úÖ ‚àí(x ‚àí 2) = ‚àíx + 2</div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- Practice Section -->
    <section class="practice-section py-5">
        <div class="container">
          <div class="card shadow-lg">
            <div class="card-body">
              <h3 class="text-center mb-4">‚ûñ Dealing With Negative Sign Practice Test</h3>
              
              <div class="row g-4">
                <!-- Question Panel -->
                <div class="col-lg-6">
                  <div class="question-card h-100">
                    <div class="card h-100">
                      <div class="card-header bg-primary text-white">
                        <h5>Question</h5>
                      </div>
                      <div class="card-body d-flex flex-column">
                        <h5 class="question-text mb-4"></h5>
                        <div class="options-container mb-3 flex-grow-1"></div>
                        <div class="feedback alert mb-3" style="display: none;"></div>
                        <div class="explanation alert alert-info" style="display: none;"></div>
                        <div class="mt-auto">
                          <button class="btn btn-primary w-100" id="checkAnswerBtn" disabled>
                            Check Answer
                          </button>
                          <div class="navigation-controls d-flex justify-content-between mt-3">
                            <button class="btn btn-secondary" id="prevBtn" disabled>
                              <i class="bi bi-chevron-left"></i> Previous
                            </button>
                            <button class="btn btn-secondary" id="nextBtn" disabled>
                              Next <i class="bi bi-chevron-right"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
  
                <!-- Progress Panel -->
                <div class="col-lg-6">
                  <div class="progress-card h-100">
                    <div class="card h-100">
                      <div class="card-header bg-primary text-white">
                        <h5>Progress</h5>
                      </div>
                      <div class="card-body">
                        <div class="row row-cols-4 g-2 mb-4" id="questionNavigation"></div>
                        <div class="progress mt-4">
                          <div class="progress-bar bg-primary" role="progressbar"></div>
                        </div>
                        <div class="mt-3 text-center">
                          <span class="badge bg-primary me-2"><i class="bi bi-check-circle"></i> Answered</span>
                          <span class="badge bg-secondary"><i class="bi bi-circle"></i> Unanswered</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
  
          <!-- Loading State -->
          <div class="text-center mt-5" id="loading">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-2">Loading practice questions...</p>
          </div>
  
          <!-- Error State -->
          <div class="alert alert-danger mt-5" id="error" style="display: none;"></div>
        </div>
      </section>

     

      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const QUESTIONS_API = 'https://sanghamitra-learnworld.vercel.app/api/arithmeticQuestionsDatabase';
          const SCORES_API = 'https://sanghamitra-learnworld.vercel.app/api/arithmetic-scores';
          const SESSION_API = 'https://sanghamitra-learnworld.vercel.app/api/session-info';
          
          let quizState = {
              questions: [],
              currentQuestionIndex: 0,
              user: { email: null, username: null },
              scores: null,
              selectedAnswer: null
          };
      
          // DOM Elements
          const elements = {
              questionText: document.querySelector('.question-text'),
              optionsContainer: document.querySelector('.options-container'),
              questionNav: document.getElementById('questionNavigation'),
              loading: document.getElementById('loading'),
              error: document.getElementById('error'),
              progressBar: document.querySelector('.progress-bar'),
              checkAnswerBtn: document.getElementById('checkAnswerBtn'),
              prevBtn: document.getElementById('prevBtn'),
              nextBtn: document.getElementById('nextBtn'),
              feedback: document.querySelector('.feedback'),
              explanation: document.querySelector('.explanation')
          };
      
          async function initializeQuiz() {
              try {
                  await fetchUserSession();
                  await loadQuestions();
                  await loadScores();
                  mergeAttemptData();
                  buildQuestionNavigation();
                  showQuestion(quizState.currentQuestionIndex);
                  setupEventListeners();
                  updateProgressBar();
              } catch (error) {
                  showError(error.message);
              } finally {
                  elements.loading.style.display = 'none';
              }
          }
      
          async function fetchUserSession() {
              try {
                  const response = await fetch(SESSION_API, { credentials: 'include' });
                  if (!response.ok) throw new Error('Authentication required');
                  const { email, username } = await response.json();
                  quizState.user = { email, username };
              } catch (error) {
                  showError('Please login to access this content');
                  window.location.href = '/login.html';
              }
          }
      
          async function loadQuestions() {
              try {
                  const params = new URLSearchParams({ 
                      operationType: 'dealing-with-negative-sign',
                      // Add fields parameter if needed (depends on your API implementation)
                      fields: 'questionText,options,correctOption,explanation,difficultyLevel,arithmeticCategory,coreSkills,commonErrors,foundationalRequirements,gradeLevel'
                  });
                  
                  const response = await fetch(`${QUESTIONS_API}?${params}`);
                  const result = await response.json();
                  quizState.questions = result.questions.map(q => ({
                      ...q,
                      startTime: Date.now()
                  }));
              } catch (error) {
                  showError(`Failed to load questions: ${error.message}`);
              }
          }
      
          async function loadScores() {
              try {
                  const params = new URLSearchParams({
                      userEmail: quizState.user.email,
                      operationType: 'dealing-with-negative-sign'
                  });
                  const response = await fetch(`${SCORES_API}?${params}`);
                  quizState.scores = await response.json();
              } catch (error) {
                  quizState.scores = {
                      questionsAttempted: [],
                      totalQuestions: 0,
                      correctAnswers: 0,
                      timeTaken: 0
                  };
              }
          }
      
          function mergeAttemptData() {
              quizState.questions = quizState.questions.map(question => {
                  const attempt = quizState.scores?.questionsAttempted?.find(a => 
                      a.questionId?._id.toString() === question._id.toString()
                  );
                  
                  return attempt ? {
                      ...question,
                      attempted: true,
                      userAnswer: attempt.userAnswer,
                      isCorrect: attempt.isCorrect,
                      timeSpent: attempt.timeSpent
                  } : { ...question, attempted: false };
              });
          }
      
          function buildQuestionNavigation() {
              elements.questionNav.innerHTML = quizState.questions
                  .map((q, index) => `
                      <div class="question-number" data-index="${index}">
                          ${index + 1}
                      </div>`
                  ).join('');
          }
      
          function showQuestion(index) {
              resetFeedback();
              const question = quizState.questions[index];
              
              // Record start time for new attempts
              if (!question.attempted) {
                  quizState.questions[index].startTime = Date.now();
              }
      
              elements.questionText.textContent = question.questionText;
              elements.optionsContainer.innerHTML = '';
              elements.checkAnswerBtn.disabled = question.attempted;
              quizState.selectedAnswer = null;
      
              Object.entries(question.options).forEach(([key, value]) => {
                  const button = document.createElement('button');
                  button.className = 'btn btn-outline-primary mb-2 w-100';
                  button.innerHTML = `<strong>${key}.</strong> ${value}`;
                  if (question.userAnswer === key) {
                        button.classList.add('selected-answer');
                    }
                  
                  if (question.attempted) {
                      button.disabled = true;
                      const isCorrect = key === question.correctOption;
                      const isUserAnswer = key === question.userAnswer;
                      
                      if (isCorrect) button.classList.add('btn-success');
                      if (isUserAnswer) {
                          button.classList.add(isCorrect ? 'btn-success' : 'btn-danger');
                      }
                  } else {
                      button.addEventListener('click', () => selectAnswer(key, button));
                  }
                  
                  elements.optionsContainer.appendChild(button);
              });
      
              if (question.attempted) {
                  showPersistedFeedback(question);
              }
      
              updateNavigationState();
              updateButtonStates();
          }
      
          function showPersistedFeedback(question) {
              elements.feedback.textContent = question.isCorrect ? 'üéâ Correct!' : '‚ùå Incorrect';
              elements.feedback.className = `alert ${question.isCorrect ? 'alert-success' : 'alert-danger'}`;
              elements.feedback.style.display = 'block';
              
              if (!question.isCorrect) {
                  elements.explanation.innerHTML = `
                      <strong>Explanation:</strong> ${question.explanation}<br>
                      <strong>Time Spent:</strong> ${Math.round(question.timeSpent/1000)}s
                  `;
                  elements.explanation.style.display = 'block';
              }
          }
      
          function selectAnswer(answer, button) {
              document.querySelectorAll('.options-container button').forEach(btn => {
                  btn.classList.remove('active');
              });
              button.classList.add('active');
              quizState.selectedAnswer = answer;
              elements.checkAnswerBtn.disabled = false;
          }
      
          async function handleCheckAnswer() {
              const question = quizState.questions[quizState.currentQuestionIndex];
              const timeSpent = Date.now() - question.startTime;
              const isCorrect = quizState.selectedAnswer === question.correctOption;
    
              try {
                  const response = await fetch(SCORES_API, {
                      method: 'POST',
                      headers: { 'Content-Type': 'application/json' },
                      body: JSON.stringify({
                          userEmail: quizState.user.email,
                          username: quizState.user.username,
                          operationType: 'dealing-with-negative-sign',
                          totalQuestions: 1,
                          correctAnswers: isCorrect ? 1 : 0,
                          questionsAttempted: [{
                              questionId: question._id,
                              userAnswer: quizState.selectedAnswer,
                              isCorrect: isCorrect,
                              timeSpent: timeSpent,
                              // Add question metadata
                              difficultyLevel: question.difficultyLevel,
                              coreSkills: question.coreSkills,
                              commonErrors: question.commonErrors,
                              foundationalRequirements: question.foundationalRequirements,
                              arithmeticCategory: question.arithmeticCategory,
                              gradeLevel: question.gradeLevel
                          }],
                          timeTaken: Math.round(timeSpent/1000)
                      })
                  });
    
                if (!response.ok) throw new Error('Save failed');
                
                // Update local state
                const updatedQuestion = {
                    ...question,
                    attempted: true,
                    userAnswer: quizState.selectedAnswer,
                    isCorrect,
                    timeSpent
                };
                quizState.questions[quizState.currentQuestionIndex] = updatedQuestion;
                
                showQuestion(quizState.currentQuestionIndex);
                updateProgressBar();
                
            } catch (error) {
                showError(`Save failed: ${error.message}`);
            }
    
            // Immediate feedback
            elements.feedback.textContent = isCorrect ? 'üéâ Correct!' : '‚ùå Incorrect';
            elements.feedback.className = `alert ${isCorrect ? 'alert-success' : 'alert-danger'}`;
            elements.feedback.style.display = 'block';
    
            if (!isCorrect) {
                elements.explanation.innerHTML = `
                    <strong>Explanation:</strong> ${question.explanation}<br>
                    <strong>Time Spent:</strong> ${Math.round(timeSpent/1000)}s
                `;
                elements.explanation.style.display = 'block';
            }
        }
      
          function updateNavigationState() {
              document.querySelectorAll('.question-number').forEach((btn, index) => {
                  const question = quizState.questions[index];
                  btn.classList.toggle('active', index === quizState.currentQuestionIndex);
                  btn.classList.toggle('answered', question.attempted);
                  btn.classList.toggle('correct', question.attempted && question.isCorrect);
                  btn.classList.toggle('incorrect', question.attempted && !question.isCorrect);
              });
          }
      
          function updateProgressBar() {
              const attemptedCount = quizState.questions.filter(q => q.attempted).length;
              const totalQuestions = quizState.questions.length;
              const progress = (attemptedCount / totalQuestions) * 100;
              elements.progressBar.style.width = `${progress}%`;
              elements.progressBar.textContent = `${Math.round(progress)}% (${attemptedCount}/${totalQuestions})`;
          }
      
          function resetFeedback() {
              elements.feedback.style.display = 'none';
              elements.explanation.style.display = 'none';
          }
      
          function navigate(direction) {
              const newIndex = quizState.currentQuestionIndex + direction;
              if (newIndex >= 0 && newIndex < quizState.questions.length) {
                  quizState.currentQuestionIndex = newIndex;
                  showQuestion(newIndex);
              }
          }
      
          function updateButtonStates() {
              elements.prevBtn.disabled = quizState.currentQuestionIndex === 0;
              elements.nextBtn.disabled = quizState.currentQuestionIndex === quizState.questions.length - 1;
          }
      
          function setupEventListeners() {
              // Answer check handler
              elements.checkAnswerBtn.addEventListener('click', handleCheckAnswer);
      
              // Navigation buttons
              elements.prevBtn.addEventListener('click', () => navigate(-1));
              elements.nextBtn.addEventListener('click', () => navigate(1));
      
              // Question number clicks
              document.querySelectorAll('.question-number').forEach(btn => {
                  btn.addEventListener('click', () => {
                      const index = parseInt(btn.dataset.index);
                      if (!isNaN(index)) {
                          quizState.currentQuestionIndex = index;
                          showQuestion(index);
                      }
                  });
              });
          }
      
          function showError(message) {
              elements.error.textContent = message;
              elements.error.style.display = 'block';
              setTimeout(() => elements.error.style.display = 'none', 5000);
          }
      
          initializeQuiz();
      });
      </script>


      
     
    </main>

    <footer id="footer" class="footer position-relative">
        <div class="container footer-top">
          <div class="row gy-4">
            <div class="col-lg-4 col-md-6 footer-about">
              <a href="../index.html" class="logo d-flex align-items-center">
                <span class="">Sanghamitra Learning</span>
              </a>
              <div class="footer-contact pt-3">
                <p>GacchiBowli</p>
                <p>Hyderabad, TS 500032</p>
                <p class="mt-3"><strong>Phone:</strong> <span>+91 7020102729</span></p>
                <p><strong>Email:</strong> <span>sanghamitra.learnworlds@gmail.com</span></p>
              </div>
              <div class="social-links d-flex mt-4">
                <a href=""><i class="bi bi-twitter"></i></a>
                <a href=""><i class="bi bi-facebook"></i></a>
                <a href=""><i class="bi bi-instagram"></i></a>
                <a href=""><i class="bi bi-linkedin"></i></a>
              </div>
            </div>
    
            <div class="col-lg-4 col-md-12 footer-newsletter">
              
            </div>
    
          </div>
        </div>
    
        <div class="container copyright text-center mt-4">
          <p>¬© <span>Copyright</span> <strong class="px-1">Sanghamitra Learning</strong> <span>All Rights Reserved</span></p>
          <div class="credits">
            <!-- All the links in the footer should remain intact. -->
            <!-- You can delete the links only if you've purchased the pro version. -->
            <!-- Licensing information: https://bootstrapmade.com/license/ -->
            <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
            Designed by <a href="../index.html">Sanghamitra</a>
          </div>
        </div>
    
      </footer>
    
      <!-- Scroll Top -->
      <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
    
      <!-- Preloader -->
      <div id="preloader"></div>
    
      <!-- Vendor JS Files -->
      <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
      <script src="../assets/vendor/php-email-form/validate.js"></script>
      <script src="../assets/vendor/aos/aos.js"></script>
      <script src="../assets/vendor/glightbox/js/glightbox.min.js"></script>
      <script src="../assets/vendor/purecounter/purecounter_vanilla.js"></script>
      <script src="../assets/vendor/swiper/swiper-bundle.min.js"></script>
    
      <!-- Main JS File -->
      <script src="../assets/js/main.js"></script>
      <script src="navbar.js"></script>
    
    </body>
    
    </html>
    
    
    
