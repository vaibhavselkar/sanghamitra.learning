<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Python Basics</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="../assets/img/favicon.png" rel="icon">
  <link href="../assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/aos/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/dracula.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>
  <link href="../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="../assets/css/main.css" rel="stylesheet">
</head>

<style>
  .container h1 {
    text-align: center;
    font-family: "arial", sans-serif;
  }

  .container h2 {
    font-family: 'Comic Sans MS', cursive;
    font-size: 16px;
  }

  /* Add to existing style section */
  .text-success { color: #28a745 !important; }
  .text-danger { color: #dc3545 !important; }
  .bi-1-circle, .bi-2-circle, .bi-3-circle { 
    margin-right: 8px;
    font-size: 1.2em;
  }

  .explanation {
    background: #ffffff;
    margin: 1.5rem 0;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  }
  
  code {
    background-color: var(--light-bg);
    padding: 0.2em 0.4em;
    border-radius: 3px;
    font-family: 'Roboto Mono', monospace;
    font-size: 0.9em;
  }

  @media (max-width: 768px) {
    .container {
      padding: 20px;
      margin: 10px;
    }
    
    h1 {
      font-size: 2rem;
    }
  }

  .code-section {
    margin: 1.5rem 0;
    position: relative;
  }

  .CodeMirror {
    border-radius: var(--border-radius) !important;
    border: 1px solid #e0e0e0 !important;
    font-size: 0.95rem;
    transition: box-shadow 0.3s ease;
  }

  .CodeMirror:hover {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }

  .output {
    margin-top: 1rem;
    padding: 1rem;
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: var(--border-radius);
    white-space: pre-wrap;
    font-family: 'Roboto Mono', monospace;
    font-size: 0.9rem;
    min-height: 50px;
    display: none;
    position: relative;
  }

  .output::before {
    display: block;
    font-weight: 500;
    color: var(--secondary-color);
    margin-bottom: 0.5rem;
  }

  button {
    padding: 0.8rem 1.5rem;
    background-color: var(--primary-color);
    color: rgb(0, 7, 7);
    border: none;
    border-radius: 25px;
    cursor: pointer;
    margin: 1rem 0;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all 0.3s ease;
  }

  button:hover {
    background-color: #28a745;
    transform: translateY(-1px);
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
  }

  ul {
    padding-left: 1.5rem;
    margin: 1rem 0;
  }

  .CodeMirror {
    width: 100% !important;
    max-width: 1100px; /* Adjust as per your layout */
  }

  .guide-content .section {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .flowchart-example {
    background: white;
    padding: 15px;
    border-radius: 8px;
    margin: 15px 0;
  }

  /* NEW: Side-by-side comparison styles */
  .comparison-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 20px 0;
  }

  .code-comparison {
    flex: 1;
    min-width: 300px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  .code-header {
    padding: 10px 15px;
    font-weight: bold;
    display: flex;
    align-items: center;
  }

  .correct .code-header {
    background-color: #d4edda;
    color: #155724;
  }

  .incorrect .code-header {
    background-color: #f8d7da;
    color: #721c24;
  }

  .code-header i {
    margin-right: 8px;
  }

  .code-body {
    padding: 15px;
    background: white;
  }

  @media (max-width: 768px) {
    .comparison-container {
      flex-direction: column;
    }
    
    .code-comparison {
      min-width: 100%;
    }
  }
</style>

<body>

  <!-- Header Section -->
  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">
      <a href="../index.html" class="logo d-flex align-items-center me-auto">
        <h1><img src="../img/sbi.logo.png" alt="company logo" width="80" height="80">Sanghamitra Learning</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <div id="navbar-placeholder"></div>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main">
    <div class="page-title" data-aos="fade">
      <div class="heading">
        <div class="container">
          <div class="row d-flex justify-content-center text-center">
            <div class="col-lg-8">
              <h1>Python Basics</h1>
              <p class="mb-0">Learn the fundamentals of Python programming</p>
            </div>
          </div>
        </div>
      </div>
      <nav class="breadcrumbs">
        <div class="container">
          <ol>
            <li><a href="../index.html">Home</a></li>
            <li><a href="programming.html">Programming</a></li>
            <li class="current">Python Basics</li>
          </ol>
        </div>
      </nav>
    </div>

    <!-- 1. Basic Python Section -->
    <div class="container guide-content">
      <div class="section" data-aos="fade-up">
        <h2><i class="bi bi-file-earmark-code"></i> 1. Basic Python</h2>
        
        <div class="flowchart-example">
          <h3><i class="bi bi-lightbulb"></i> 1.1 Introduction to Python</h3>
          <p><b>When was Python developed?</b><br>
          Python was created by Guido van Rossum in the late 1980s. He started working on it in December 1989, and the first version was released in 1991 (over 30 years ago!).</p>
          
          <p><b>Why was Python developed?</b><br>
          Guido wanted to create a programming language that:</p>
          <ul>
            <li><b>Easy to read and write</b><br>
            Code should look almost like English (e.g., <code>print("Hello")</code> instead of confusing symbols).<br>
            Perfect for beginners!</li>
            <li><b>Fun to use</b><br>
            He named it after Monty Python (a funny British comedy show), not the snake!</li>
            <li><b>Flexible for all tasks</b><br>
            From building websites to analyzing data or even controlling robots!</li>
          </ul>
          
          <p><b>Why learn Python today?</b></p>
          <ul>
            <li><b>Simple:</b> Great for your first programming language.</li>
            <li><b>Popular:</b> Used by companies like Google, Netflix, and NASA.</li>
            <li><b>Free:</b> Anyone can use it!</li>
          </ul>
          
          <div class="explanation">
            <textarea class="codeInput"># Simple Python example
print("Python is fun!")
            </textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
          </div>
          
          <h3><i class="bi bi-globe"></i> 1.2 Usage in Real Life</h3>
          <p><b>Real-Life Uses</b></p>
          <ul>
            <li><b>Instagram:</b> Built with Python.</li>
            <li><b>NASA:</b> Uses Python for scientific calculations.</li>
            <li><b>Netflix:</b> Recommends movies using Python.</li>
            <li><b>Games:</b> Developing games like Minecraft.</li>
            <li><b>Automation:</b> Automating repetitive tasks (e.g., sending emails).</li>
          </ul>
          
          <div class="explanation">
            
            
            <p><b>Exercise:</b><br>
            Write a program to print your favorite real-life use of Python.</p>
            <textarea class="codeInput"># Your coding in print statements
print("My favorite real-life use of Python is: ")
            </textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
          </div>
          
          <h3><i class="bi bi-laptop"></i> 1.3 Using Compilers (Jupyter, Online Compilers)</h3>
          <p><b>What is a Compiler?</b><br>
          A tool that runs your Python code.</p>
          
          <p><b>Examples of Compilers:</b></p>
          <ul>
            <li><b>Jupyter Notebook:</b> Write code in cells and run them.</li>
            <li><b>Google Colab:</b> Free online Python editor.</li>
            <li><b>Spyder:</b> A desktop IDE for Python.</li>
          </ul>
          
          <br>
          
          
        
          <h3><i class="bi bi-pencil"></i> 1.4 Python Basic Data Types</h3>
          <p>There are 4 basic data types in Python</p>
          <ul>
              <li><b>int</b>: Whole numbers, e.g., <code>10</code>, <code>-5</code></li>
              <li><b>float</b>: Decimal numbers, e.g., <code>3.14</code>, <code>-0.5</code></li>
              <li><b>str</b>: Text, e.g., <code>"Hello, World!"</code></li>
              <li><b>bool</b>: True/False values</li>
          </ul>
          <p>It’s important for us to know about and understand the different types because certain operations are only allowed between certain types (for instance, we can’t divide a string by another string, what would that even mean?) and because the behavior and structure of our programs is going to depend in part on the types of our variables.</p>
          <h3>Integers</h3>
          <p>Python uses the int data type to represent whole integer values. For example, we can use the int data type to store the roll number of a student. The Integer type in Python is represented using a int class.</p>
          <p>Integers are all whole numbers. As soon as there is a decimal point, the number is no longer an int, it’s a float instead.</p>
          <p>Note: Numbers that you might be used to writing with a comma (such as 1,000,000) are written as 1000000 in python. This is because python would try to interpret 1,000,000 as three separate numbers!</p>
          <p>We can create an integer variable using two ways:</p>
          <ul>
              <li>Directly assigning an integer value to a variable</li>
              <li>Using the <code>int()</code> class</li>
          </ul>
          <div class="explanation">
              <P>Run the cell and see how data type is find, change the number in editor</P>
              <textarea class="codeInput"># store int value
roll_no = 33
# display roll no
print("Roll number is:", roll_no)
# output 33
print(type(roll_no))  
# output class 'int'</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
          <div class="explanation">
              <textarea class="codeInput"># store integer using int() class
id = int(25)
print(id)  # 25
print(type(id))  # class 'int'</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
          <h3>Float</h3>
          <p>To represent floating-point values or decimal values, we can use the float data type. For example, if we want to store the salary, we can use the float type.</p>
          <p>We can create an float variable using two ways:</p>
          <ul>
              <li>Directly assigning a float value to a variable</li>
              <li>Using the <code>float()</code> class</li>
          </ul>
          <div class="explanation">
              <P>Run the cell and see how data type is find, change the number in editor</P>
              <textarea class="codeInput"># store a floating-point value
salary = 8000.456
print("Salary is :", salary)  # 8000.456
print(type(salary))  # class 'float'</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
          <div class="explanation">
              <textarea class="codeInput"># store a floating-point value using float() class
num = float(54.75)
print(num)  # 54.75
print(type(num))  # class 'float'</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
          <h3>String</h3>
          <p>In Python, A string is a sequence of characters enclosed within a single quote or double quote. These characters could be anything like letters, numbers, or special symbols enclosed within double quotation marks. For example, "PYnative" is a string.</p>
          <p>The string type in Python is represented using a str class.</p>
          <p>To work with text or character data in Python, we use Strings. Once a string is created, we can do many operations on it, such as searching inside it, creating a substring from it, and splitting it.</p>
          <div class="explanation">
              <P>Example</P>
              <textarea class="codeInput">platform = "Sanghamitra"
print(type(platform))  # <class 'str'>

# display string
print(platform)  # 'Sanghamitra'

# accessing 2nd character of a string
print(platform[1])  # a</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
          <p>Note: The string is immutable, i.e., it can not be changed once defined. You need to create a copy of it if you want to modify it. This non-changeable behavior is called immutability.</p>
          <div class="explanation">
              <textarea class="codeInput">platform = "SANGHAMITRA"
# Now let's try to change 2nd character of a string.
platform[0] = 's'
# Gives TypeError: 'str' object does not support item assignment</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
          <h3>Boolean</h3>
          <p>In Python, to represent boolean values (True and False) we use the bool data type. Boolean values are used to evaluate the value of the expression. For example, when we compare two values, the expression is evaluated, and Python returns the boolean True or False.</p>
          <div class="explanation">
              <P>Example</P>
              <textarea class="codeInput">x = 25
y = 20

z = x > y
print(z)  # True
print(type(z))  # class 'bool'</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
     

      
          <h3><i class="bi bi-pencil"></i> 1.5 Variables</h3>
          <p>Variables store data values in Python:</p>
          <p>In Python, to represent boolean values (True and False) we use the bool data type. Boolean values are used to evaluate the value of the expression. For example, when we compare two values, the expression is evaluated, and Python returns the boolean True or False.</p>
          <p>A variable is a reserved memory area (memory address) to store value. For example, we want to store an employee’s salary. In such a case, we can create a variable and store salary using it. Using that variable name, you can read or modify the salary amount.</p>
          <p>In other words, a variable is a value that varies according to the condition or input pass to the program. Everything in Python is treated as an object so every variable is nothing but an object in Python.</p>
          <p>A variable can be either <b></b>mutable</b> or <b>immutable</b>. If the variable’s value can change, the object is called mutable, while if the value cannot change, the object is called immutable. We will learn the difference between mutable and immutable types in the later section of this article.</p>
          <h3>Creating a variable</h3>
          <p>Python programming language is dynamically typed, so there is no need to declare a variable before using it or declare the data type of variable like in other programming languages. The declaration happens automatically when we assign a value to the variable.</p>
          <p>We can assign a value to the variable at that time variable is created. We can use the assignment operator <b>=</b> to assign a value to a variable.</p>
          <div class="explanation">
              <P>Example</P>
              <textarea class="codeInput"># Run the cell to see outout
x = 25
print(x)


</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
          <p>The operand, which is on the left side of the assignment operator, is a variable name <b>'x'</b>. And the operand, which is the right side of the assignment operator, is the variable’s value <b>'25'</b>.</p>
          <p>When we call <b>operand</b> it will provide the assigned value.</p>
          <div class="explanation">
              <P>Example</P>
              <textarea class="codeInput">name = "John"  # string assignment
age = 25  # integer assignment
salary = 25800.60  # float assignment

print(name)  # John
print(age)  # 25
print(salary)  # 25800.6

</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
          <h3>Changing the value of a variable</h3>
          <p>A variable may be assigned to a value of <b>one type</b>, and then later, we can also re-assigned a value of a <b>different type</b>.</p>
          <p>We can assign a value to the variable at that time variable is created. We can use the assignment operator <b>=</b> to assign a value to a variable.</p>
          <div class="explanation">
              <P>Example</P>
              <textarea class="codeInput"># Run the cell to see outout
var = 10
print(var)  # 10
# print its type
print(type(var))  # <class 'int'>

# assign different integer value to var
var = 55
print(var)  # 55

# change var to string
var = "Now I'm a string"
print(var)  # Now I'm a string
# print its type
print(type(var))  # <class 'str'>

# change var to float
var = 35.69
print(var)  # 35.69
# print its type
print(type(var))  # <class 'float'>


</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
          <h3>Deleting a variable</h3>
          <p>Use the del keyword to delete the variable. Once we delete the variable, it will not be longer accessible and eligible.</p>
          <div class="explanation">          
              <P>Now if we delete then we will not be able to see the value again and it will show error.</P>
              <textarea class="codeInput">x = 25
del x
print(x)

</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
          <h3>Variable's are case-sensitive</h3>
          <p>Python is a case-sensitive language. If we define a variable with names <b>a = 100</b> and <b>A =200</b> then, Python differentiates between <b>a</b> and <b>A</b>. These variables are treated as two different variables (or objects).</p>
          <div class="explanation">
              <P>Example</P>
              <textarea class="codeInput"># Run the cell to see outout
a = 100
A = 200

# value of a
print(a)  # 100
# Value of A
print(A)  # 200

a = a + A
print(a)  # 300

</textarea>
              <button onclick="runCode(this)">Run Code</button>
              <div class="output"></div>
          </div>
      
         <h3><i class="bi bi-pencil"></i> 1.6 Descriptive Writing (Why It Matters)</h3>
         <p><b>Why It Matters:</b><br>
         Writing clear and descriptive code helps others (and your future self) understand what the code does.</p>
         <p><b>Use Descriptive Naming:</b><br>
         Choose variable, function, and file names that clearly describe their purpose or contents.<br>
         Instead of naming a variable <code>x</code>, use <code>student_score</code> or <code>total_price</code>.</p>
         
         <p><b>Advantages of Descriptive Writing:</b></p>
         <ul>
           <li>Makes code easier to read and maintain</li>
           <li>Improves collaboration in teams</li>
           <li>Reduces chances of bugs due to misunderstandings</li>
           <li>Helps in debugging and reviewing after long gaps</li>
         </ul>
         
         <p><b>Why We Use Underscores Instead of Spaces:</b><br>
         In most programming languages, variable names cannot contain spaces. Underscores (<code>_</code>) are used to make names more readable, such as <code>max_temperature</code> or <code>file_path</code>, instead of <code>maxtemperature</code>.</p>
          
          <div class="comparison-container">
            <div class="code-comparison incorrect">
              <div class="code-header">
                <i class="bi bi-x-circle-fill"></i> Hard to Understand
              </div>
              <div class="code-body">
                <textarea class="codeInput"># Bad Example  
x = 10  
y = 5  
z = x + y
print(z)                      
</textarea>
                <button onclick="runCode(this)">Run Code</button>
                <div class="output"></div>
              </div>
            </div>
            
            <div class="code-comparison correct">
              <div class="code-header">
                <i class="bi bi-check-circle-fill"></i> Clear and Descriptive
              </div>
              <div class="code-body">
                <textarea class="codeInput"># Good Example  
total_apples = 10  
apples_added = 5  
total_fruits = total_apples + apples_added
print(total_fruits)
</textarea>
                <button onclick="runCode(this)">Run Code</button>
                <div class="output"></div>
              </div>
            </div>
          </div>
            
          <p><b>Exercise:</b><br>
          Rewrite this code with meaningful variable names:</p>
          <textarea class="codeInput">a = 20  
b = 4  
c = a * b
print(c)
</textarea>
          <button onclick="runCode(this)">Run Code</button>
          <div class="output"></div>
          
          <h3><i class="bi bi-chat-square-text"></i> 1.5 Comments (#)</h3>
          <p><b>What are Comments?</b><br>
          Comments are notes in your code that Python ignores. They start with <code>#</code>.</p>
          
          <p><b>Why Use Comments?</b></p>
          <ul>
            <li>To explain what your code does.</li>
            <li>To make your code easier to understand.</li>
          </ul>
          
          <div class="comparison-container">
            <div class="code-comparison incorrect">
              <div class="code-header">
                <i class="bi bi-x-circle-fill"></i> No Comments
              </div>
              <div class="code-body">
                <textarea class="codeInput">length = 10  
width = 5  
area = length * width  
print("Area:", area)
 
</textarea>
                <button onclick="runCode(this)">Run Code</button>
                <div class="output"></div>
              </div>
            </div>
            
            <div class="code-comparison correct">
              <div class="code-header">
                <i class="bi bi-check-circle-fill"></i> With Helpful Comments
              </div>
              <div class="code-body">
                <textarea class="codeInput"># Calculate the area of a rectangle  
length = 10  # in meters  
width = 5    # in meters  
area = length * width  # area in square meters  
print("Area:", area)   # display the result
 </textarea>
                <button onclick="runCode(this)">Run Code</button>
                <div class="output"></div>
              </div>
            </div>
          </div>
            
          <p><b>Exercise:</b><br>
          Add comments to this code:</p>
          <textarea class="codeInput">x = 15  
y = 3  
result = x // y  
print(result)
 </textarea>
          <button onclick="runCode(this)">Run Code</button>
          <div class="output"></div>
        </div>
      </div>
    </div>

    <!-- 4. Python Indentation -->
    <div class="container guide-content">
      <div class="section" data-aos="fade-up">
        <h2><i class="bi bi-text-indent-left"></i> 4. Python Indentation</h2>
        
        <div class="flowchart-example">
          <h3><i class="bi bi-1-circle"></i> 4.1 Introduction to Indentation</h3>
          <p>In Python, indentation (spaces or tabs at the start of a line) is used to define blocks of code. Unlike other languages that use braces <code>{}</code>, Python relies on indentation to separate different parts of the program. Proper indentation ensures that the code runs correctly and is easy to read. Incorrect indentation can lead to errors or unexpected behavior.</p>
          
          <div class="explanation" style="background-color: #f0f8ff; border-left: 4px solid #4682b4;">
            <h3>Why is Indentation Important?</h3>
            <ul>
              <li><b>Defines Code Blocks</b> – Python uses indentation to group statements (like in loops, functions, and conditions).</li>
              <li><b>Improves Readability</b> – Well-indented code is easier to understand and debug.</li>
              <li><b>Avoids Errors</b> – Wrong indentation can cause <code>IndentationError</code> or logical mistakes.</li>
            </ul>
          </div>

          <h3><i class="bi bi-2-circle"></i> 4.2 Examples of Indentation</h3>
          
          <div class="comparison-container">
            <div class="code-comparison incorrect">
              <div class="code-header">
                <i class="bi bi-x-circle-fill"></i> Wrong Indentation (Error!)
              </div>
              <div class="code-body">
                <textarea class="codeInput">age = 18  
if age >= 18:  
print("You are an adult")  # Missing indentation
                </textarea>
                <button onclick="runCode(this)">Run Code</button>
                <div class="output"></div>
              </div>
            </div>
            
            <div class="code-comparison correct">
              <div class="code-header">
                <i class="bi bi-check-circle-fill"></i> Correct Indentation
              </div>
              <div class="code-body">
                <textarea class="codeInput">age = 18  
if age >= 18:  
    print("You are an adult")  # Properly indented  
print("This always runs")      # Outside the if block</textarea>
                <button onclick="runCode(this)">Run Code</button>
                <div class="output"></div>
              </div>
            </div>
          </div>
          
          <div class="comparison-container">
            <div class="code-comparison incorrect">
              <div class="code-header">
                <i class="bi bi-x-circle-fill"></i> Inconsistent Indentation
              </div>
              <div class="code-body">
                <textarea class="codeInput">for i in range(3):  
  print("Outer loop:", i)  
    for j in range(2):  # Wrong indentation level
        print("Inner:", j)
                </textarea>
                <button onclick="runCode(this)">Run Code</button>
                <div class="output"></div>
              </div>
            </div>
            
            <div class="code-comparison correct">
              <div class="code-header">
                <i class="bi bi-check-circle-fill"></i> Consistent Indentation
              </div>
              <div class="code-body">
                <textarea class="codeInput">for i in range(3):  
    print("Outer loop:", i)  
    for j in range(2):  
        print("Inner:", j)  # Proper nesting
                </textarea>
                <button onclick="runCode(this)">Run Code</button>
                <div class="output"></div>
              </div>
            </div>
          </div>
          
          <div class="explanation" style="background-color: #fffaf0; border-left: 4px solid #ffa500;">
            <h3>Best Practices for Indentation</h3>
            <ul>
              <li>✔ Use <b>4 spaces</b> (recommended) or a consistent tab size</li>
              <li>✔ Never mix tabs and spaces (Python 3 disallows it)</li>
              <li>✔ Indent after <code>:</code> (colon) in loops, functions, and conditions</li>
              <li>✔ Use an IDE (like VS Code or PyCharm) to auto-indent code</li>
            </ul>
          </div>
          
          <div class="explanation">
            <h3>Exercises</h3>
            <p><b>1. Fix the indentation error:</b></p>
            <textarea class="codeInput">for i in range(5):  
print(i)
            </textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            
            <p><b>2. Identify the error in this nested loop:</b></p>
            <textarea class="codeInput">for i in range(3):  
    for j in range(3):  
    print(i, j)
            </textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            
            <p><b>3. Fix the indentation:</b></p>
            <textarea class="codeInput">def calculate(x,y):
result = x + y
if result > 10:
print("Large number")
return result
print(calculate(7,6))
            </textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
          </div>
        </div>
      </div>
    </div>
    <!-- 5. Python Data Structures -->
    <div class="container guide-content">
      <div class="section" data-aos="fade-up">
        <h2><i class="bi bi-boxes"></i> 5. Python Data Structures</h2>
        
        <div class="flowchart-example">
          <h3><i class="bi bi-1-circle"></i> 5.1 Lists - Your Changeable Collection</h3>
          <p>We have a collection in Computational Thinking where all grocery items are stored in a list. Similarly, in <b>Python</b>, lists are like shopping lists </p>
          <ul>
            <li>Ordered collection of items</li>
            <li>Items can be added, removed or changed - <b>mutable</b></li>
            <li>Allows duplicate values</li>
            <li>Created with square brackets []</li>
          </ul>
          
          <div class="explanation">
            <p><b>Examples with Explanation:</b></p>
            
            <p>1. Simple list of fruits:</p>
            <p>we can take </p>
            <textarea class="codeInput">fruits = ["apple", "banana", "orange"]  # Create list
print(fruits)  # Show all items
</textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            
            <p>2. List modification using indexing means changing the value of an item at a specific position in the list.</p>
            <textarea class="codeInput">numbers = [10, 20, 30]
print(numbers[0]) # Indexing or positioning starts from 0 
print(len(numbers))  # len is a function which is used to find the length of a list
numbers.remove(20)  # Remove - its a method which is used to remove a element from a list
print(numbers)
</textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            
            <p>3. Mixed data types in list:</p>
            <textarea class="codeInput">student = ["Rahul", 16, "Grade 10", True] # string, integer, string, boolean
print(student[0])  # Get name
student[3] = False  # Change status
print(student)
            </textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
          </div>
          
          <h3><i class="bi bi-2-circle"></i> 5.2 Tuples - Your Unchangeable Collection</h3>
          <p>Tuples are like sealed packages that can't be modified.</p>
          <ul>
            <li>Ordered collection like lists</li>
            <li>Items cannot be changed after creation - <b>immutable</b></li>
            <li>Faster than lists</li>
            <li>Created with parentheses/simple brackets ()</li>
          </ul>
          
          <div class="explanation">
            <p><b>Examples with Explanation:</b></p>
            
            <p>1. Basic tuple of coordinates:</p>
            <textarea class="codeInput">point = (3, 5)  # Create tuple
print(point[0])  # Access first item (3)
# point[0] = 4  # This would cause error!</textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            
            <p>2. Tuple with multiple data types:</p>
            <textarea class="codeInput">person = ("Alice", 25)
name, age = person[0], person[1]  # Unpack tuple
print(name,"is",age,"years old")
</textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
          </div>
          
          <h3><i class="bi bi-3-circle"></i> 5.3 Dictionaries - Your Labeled Storage</h3>
          <p>Dictionaries store data with custom labels (key-value pairs).</p>
          <ul>
            <li>Unordered collection</li>
            <li>Access items using keys (not positions)</li>
            <li>Keys must be unique</li>
            <li>Created with curly braces {}</li>
          </ul>
          
          <div class="explanation">
            <p><b>Examples with Explanation:</b></p>
            
            <p>1. Simple student dictionary:</p>
            <textarea class="codeInput">student = {"name": "Priya", "age": 14, "grade": "9A"}
print(student["name"])  # To access any value we call by their key name
</textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            <br>
            <textarea class="codeInput">student = {"name": "Priya", "age": 14, "grade": "9A"}
student["age"] = 15  # Update value
print(student)
</textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            <br>
            <textarea class="codeInput">student = {"name": "Priya", "age": 14, "grade": "9A"}
student["school"] = "ABC High"  # Adding new key-value pair
print(student)
            </textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            <br>
            <p>2. Dictionary with different value types:</p>
            <textarea class="codeInput">car = {"brand": "Toyota", "year": 2020, "colors": ["red", "blue"]}
print(car["brand"])  # Access element in dict
</textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            <br>
            <textarea class="codeInput">car = {"brand": "Toyota", "year": 2020, "colors": ["red", "blue"]}
print(car["colors"][0])  # Access list in dict
      </textarea>
                  <button onclick="runCode(this)">Run Code</button>
                  <div class="output"></div>
          </div>
          
          <h3><i class="bi bi-4-circle"></i> 5.4 Sets - Your Unique Collection</h3>
          <p>Sets automatically remove duplicates and allow fast lookups.</p>
          <ul>
            <li>Unordered collection</li>
            <li>No duplicate items</li>
            <li>Very fast membership testing</li>
            <li>Created with curly braces {}</li>
          </ul>
          
          <div class="explanation">
            <p><b>Examples with Explanation:</b></p>
            
            <p>1. Basic set operations:</p>
            <textarea class="codeInput">colors = {"red", "blue", "green"}
colors.add("red")  # Won't add duplicate
colors.add("yellow")
print(colors)
</textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            <br>
            <textarea class="codeInput">colors = {"red", "blue", "green"}
print("blue" in colors)  # to check an element we use in statement
print(colors)

              </textarea>
                          <button onclick="runCode(this)">Run Code</button>
                          <div class="output"></div>
            <br>
            <p>2. Finding unique letters in word:</p>
            <textarea class="codeInput">word = "hello"
unique_letters = set(word)
print(unique_letters)  # Shows {'h', 'e', 'l', 'o'} order can be different
</textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            <br>
            <p>3. Set operations - union:</p>
            <textarea class="codeInput">A = {1, 2, 3}
B = {3, 4, 5}
print(A.union(B))  # {1, 2, 3, 4, 5}
</textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
            <br>
            <p>3. Set operations - intersection:</p>
            <textarea class="codeInput">A = {1, 2, 3}
B = {3, 4, 5}
print(A.intersection(B))  # {3}
</textarea>
            <button onclick="runCode(this)">Run Code</button>
            <div class="output"></div>
          </div>
          
          
          <!-- Problem Set -->
          <div class="row d-flex justify-content-center">
            <div class="col-lg-12">
              <div class="card">
                <div class="card-header bg-success text-white">
                  <h3><i class="bi bi-question-circle"></i> Practice Quiz</h3>
                  <p class="mb-0">Test your Python skills with short practice exercises</p>
                </div>
                <div class="card-body">
                  <div id="quiz-container">
                    <div id="quiz-loading" class="text-center py-5">
                      <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                      <p class="mt-3">Loading practice questions...</p>
                    </div>
                    
                    <div id="quiz-content" style="display: none;">
                      <div class="quiz-header d-flex justify-content-between align-items-center mb-3">
                        <h4 id="quiz-title">Question Title</h4>
                        <span class="badge bg-info" id="quiz-topic">Topic</span>
                      </div>
                      
                      <div id="question-counter" class="text-muted mb-2">
                        Loading questions...
                      </div>
                      
                      <div class="quiz-question mb-4" id="quiz-description">
                        Question description goes here.
                      </div>
                      
                      <textarea id="quiz-code-editor"></textarea>
                      
                      <div class="btn-toolbar mt-3 mb-3">
                        <button class="btn btn-primary run-quiz-btn me-2" id="run-quiz-code">
                          <i class="bi bi-play-fill"></i> Run Code
                        </button>
                        <button class="btn btn-outline-secondary show-quiz-hint-btn" id="show-quiz-hint">
                          <i class="bi bi-lightbulb"></i> Show Hint
                        </button>
                        <button class="btn btn-success ms-auto" id="submit-quiz-answer">
                          <i class="bi bi-check-circle"></i> Submit Answer
                        </button>
                      </div>
                      
                      <div class="quiz-hint-container alert alert-info" style="display: none;" id="quiz-hint">
                        Hint will appear here.
                      </div>
                      
                      <div class="quiz-output" style="display: none;" id="quiz-output">
                        <h5>Output:</h5>
                        <pre class="bg-light p-3 rounded"></pre>
                      </div>
                      
                      <div class="quiz-result alert" style="display: none;" id="quiz-result">
                        Result feedback will appear here.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          </div>
        </div>
        <div class="container guide-content">
          <div class="section text-center" data-aos="fade-up">
            <h2>Ready to Learn More?</h2>
            <p>Now that you understand the Basics in Python, let's explore conditional statements!</p>
            <a href="python_conditionals.html" class="btn btn-primary">Continue to Next Lesson</a>
          </div>
        </div>
      </div>
    </div>

    <div class="container copyright text-center mt-4">
      <p>© <span>Copyright</span> <strong class="px-1">Sanghamitra Learning</strong> <span>All Rights Reserved</span></p>
      <div class="credits">
        Designed by <a href="">Sanghamitra</a>
      </div>
    </div>
  </footer>

  <script>
    // Global variables for user info
    let username = null;
    let email = null;
    let quizQuestions = [];
    let answeredQuestionIds = [];
    let currentQuizIndex = 0;
    let quizCodeEditor = null;

    // Function to fetch session info
    async function fetchSessionInfo() {
      try {
        const sessionResponse = await fetch('https://sanghamitra-learnworld.vercel.app/api/session-info', { credentials: 'include' });
        if (sessionResponse.ok) {
          const sessionData = await sessionResponse.json();
          email = sessionData.email;
          username = sessionData.username;
          window.username = username;
          window.email = email;
          console.log("User:", username, "Email:", email);
          
          // Once we have user info, fetch their answered questions
          await fetchUserAnsweredQuestions();
        } else {
          window.location.href = 'user_login.html';
        }
      } catch (error) {
        console.error('Error fetching session info:', error);
        showError('Failed to get session information. Please refresh or log in again.');
      }
    }

    // Function to fetch questions the user has already answered
    async function fetchUserAnsweredQuestions() {
      try {
        if (!email) {
          console.error('Email not available');
          return;
        }
        
        const response = await fetch(`https://sanghamitra-learnworld.vercel.app/api/finger-exercise?email=${email}&topic=python_basics`, {
          credentials: 'include'
        });
        
        if (!response.ok) {
          throw new Error(`Failed to fetch user's answered questions: ${response.status}`);
        }
        
        const answeredData = await response.json();
        
        // Extract the IDs of questions the user has already answered
        answeredQuestionIds = (answeredData.submissions || [])
          .map(sub => String(sub.questionId));
        
        console.log("Already answered questions:", answeredQuestionIds);
            
      } catch (error) {
        console.error('Error fetching user answered questions:', error);
      }
      
      // Initialize the quiz after getting user history (or failing to do so)
      await initPracticeQuiz();
    }

    // Helper function to display errors in the quiz container
    function showError(message) {
      document.getElementById('quiz-loading').innerHTML = `
        <div class="alert alert-danger">
          <p>${message}</p>
        </div>
      `;
    }

    // Initialize CodeMirror for all code input areas
    function initCodeEditors() {
      document.querySelectorAll("textarea.codeInput").forEach((textarea) => {
        const editor = CodeMirror.fromTextArea(textarea, {
          mode: "python",
          theme: "dracula",
          lineNumbers: true,
          indentUnit: 4,
          matchBrackets: true,
          viewportMargin: Infinity,
        });

        editor.setSize("100%", "auto");

        editor.on("change", function(cm) {
          let lines = cm.lineCount();
          let newHeight = Math.min(30 + lines * 20, 200);
          cm.setSize("100%", newHeight + "px");
        });
      });
    }

    // Function to run Python code (used by both regular examples and quiz)
    async function executePythonCode(code, testCases = null) {
      const endpoint = testCases ? 'https://flask-hello-world-2-eta.vercel.app/test' : 
                                  'https://flask-hello-world-2-eta.vercel.app/run-python';
      
      const payload = testCases ? { code, test_cases: testCases } : { code };
      
      try {
        const response = await fetch(endpoint, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        });
        
        return await response.json();
      } catch (error) {
        return { error: error.message };
      }
    }

    // Function for running regular code examples
    function runCode(button) {
      const cmInstance = button.previousElementSibling.CodeMirror;
      const code = cmInstance.getValue();
      const outputDiv = button.nextElementSibling;

      executePythonCode(code)
        .then(result => {
          outputDiv.style.display = "block";
          if (result.error) {
            outputDiv.innerHTML = `<span style="color:red;">${result.error}</span>`;
          } else {
            outputDiv.textContent = result.output;
          }
        });
    }

    // Initialize the practice quiz section
    async function initPracticeQuiz() {
      try {
        // Show loading state
        document.getElementById('quiz-loading').style.display = 'block';
        document.getElementById('quiz-content').style.display = 'none';
        
        // Fetch all questions from the API
        const response = await fetch('https://sanghamitra-learnworld.vercel.app/api/finger-questions?topic=python_basics', {
          credentials: 'include'
        });
        
        if (!response.ok) {
          throw new Error(`Failed to fetch questions: ${response.status}`);
        }
        
        // Get all available questions
        const allQuestions = await response.json();
        console.log("All questions:", allQuestions);
        
        // Filter out questions the user has already answered
        // Create a Set for faster lookups
        const answeredSet = new Set(answeredQuestionIds);

        // Filter questions to get only unanswered ones
        quizQuestions = allQuestions.filter(q => 
          !answeredSet.has(String(q.id))
        );
        
        console.log("Unanswered questions:", quizQuestions);
        
        // If no questions left, show completion message
        if (quizQuestions.length === 0) {
          document.getElementById('quiz-loading').innerHTML = `
            <div class="alert alert-success">
              <h4><i class="bi bi-trophy"></i> You've completed all available questions!</h4>
              <p>Great job! You have answered all the practice questions available.</p>
              <p>Check back later for new questions or review your previous work.</p>
            </div>
          `;
          return;
        }
        
        // Initialize CodeMirror for quiz
        initQuizCodeEditor();
        
        // Add event listeners
        setupQuizEventListeners();
        
        // Show the quiz content
        document.getElementById('quiz-loading').style.display = 'none';
        document.getElementById('quiz-content').style.display = 'block';
        
        // Update question counter
        updateQuestionCounter();

        // Load the first question
        loadQuizQuestion(0);
      } catch (error) {
        console.error('Error initializing practice quiz:', error);
        showError(`Failed to load practice questions: ${error.message}`);
      }
    }

    function initQuizCodeEditor() {
        const quizTextarea = document.getElementById('quiz-code-editor');
        quizCodeEditor = CodeMirror.fromTextArea(quizTextarea, {
          mode: "python",
          theme: "dracula",
          lineNumbers: false,
          indentUnit: 4,
          matchBrackets: true,
          viewportMargin: Infinity,
          lineWrapping: true,
          autoRefresh: true
        });
        
        // Set initial height to be more generous
        quizCodeEditor.setSize("100%", "250px");
        
        // Add resize handle for manual adjustment
        addResizeHandleToEditor(quizCodeEditor);
        
        // Auto-adjust height based on content
        quizCodeEditor.on("change", function() {
          autoResizeEditor(quizCodeEditor);
        });
      }

      function addResizeHandleToEditor(editor) {
        const wrapper = editor.getWrapperElement();
        
        // Create resize handle
        const resizeHandle = document.createElement('div');
        resizeHandle.className = 'editor-resize-handle';
        resizeHandle.style.cssText = `
          height: 10px;
          cursor: ns-resize;
        `;
        
        
        // Append handle after the editor
        wrapper.parentNode.insertBefore(resizeHandle, wrapper.nextSibling);
        
        // Implement resize functionality
        let startY, startHeight;
        
        function dragStart(e) {
          startY = e.clientY;
          startHeight = parseInt(window.getComputedStyle(wrapper).height, 10);
          document.addEventListener('mousemove', dragMove);
          document.addEventListener('mouseup', dragEnd);
          e.preventDefault();
        }
        
        function dragMove(e) {
          const newHeight = startHeight + e.clientY - startY;
          if (newHeight > 100) { // Minimum height
            editor.setSize(null, newHeight + 'px');
          }
        }
      
        function dragEnd() {
          document.removeEventListener('mousemove', dragMove);
          document.removeEventListener('mouseup', dragEnd);
        }
        
        resizeHandle.addEventListener('mousedown', dragStart);
      }

      function autoResizeEditor(editor) {
        const lines = editor.lineCount();
        const lineHeight = editor.defaultTextHeight();
        const padding = 20;
        
        // Calculate appropriate height based on content (min 150px, max 600px)
        const newHeight = Math.max(150, Math.min(600, (lines * lineHeight) + padding));
        
        // Only resize if significantly different from current height
        const currentHeight = editor.getScrollInfo().clientHeight;
        if (Math.abs(currentHeight - newHeight) > 30) {
          editor.setSize(null, newHeight + 'px');
        }
      }

    function setupQuizEventListeners() {
      document.getElementById('run-quiz-code').addEventListener('click', runQuizCode);
      document.getElementById('show-quiz-hint').addEventListener('click', toggleQuizHint);
      document.getElementById('submit-quiz-answer').addEventListener('click', submitQuizAnswer);
      
      // Add event listener for next button if it exists
      const nextButton = document.getElementById('next-question');
      if (nextButton) {
        nextButton.addEventListener('click', goToNextQuestion);
      }
    }

    function updateQuestionCounter() {
      const counterElement = document.getElementById('question-counter');
      if (counterElement) {
        counterElement.innerHTML = `<i class="bi bi-bookmark-check"></i> ${quizQuestions.length} questions remaining`;
      }
    }

    function loadQuizQuestion(index) {
      // Update current index
      currentQuizIndex = index;
      const question = quizQuestions[index];
      
      if (!question) {
        console.error("Question not found at index:", index);
        showError("Question data not found. Please try refreshing the page.");
        return;
      }
      
      // Update the question details
      document.getElementById('quiz-title').textContent = question.title || 'Practice Question';
      document.getElementById('quiz-topic').textContent = question.topic || 'Python';
      document.getElementById('quiz-description').innerHTML = question.description || '';
      
      // Update code editor with starter code
      quizCodeEditor.setValue(question.starter_code || '');
      
      // Update hint (hidden by default)
      document.getElementById('quiz-hint').innerHTML = question.hint || 'No hint available for this question.';
      document.getElementById('quiz-hint').style.display = 'none';
      document.getElementById('show-quiz-hint').innerHTML = '<i class="bi bi-lightbulb"></i> Show Hint';
      
      // Hide output and result
      document.getElementById('quiz-output').style.display = 'none';
      document.getElementById('quiz-result').style.display = 'none';
      
      // Hide the next button if it exists
      const nextButton = document.getElementById('next-question');
      if (nextButton) {
        nextButton.style.display = 'none';
      }
      
      document.getElementById('submit-quiz-answer').style.display = 'none';
      // Enable submit button
      document.getElementById('submit-quiz-answer').disabled = false;

      // Update question counter with current position
      const counterElement = document.getElementById('question-counter');
      if (counterElement) {
        counterElement.textContent = `Question ${index + 1} of ${quizQuestions.length}`;
      }
    }

    function goToNextQuestion() {
      // Go to next question if available
      if (currentQuizIndex < quizQuestions.length - 1) {
        loadQuizQuestion(currentQuizIndex + 1);
      } else {
        // If this was the last question, show completion message
        document.getElementById('quiz-content').innerHTML = `
          <div class="alert alert-success">
            <h4>Congratulations!</h4>
            <p>You have completed all the practice questions.</p>
            <button class="btn btn-primary" onclick="">Next Topic</button>
          </div>
        `;
      }
    }

    function toggleQuizHint() {
      const hintContainer = document.getElementById('quiz-hint');
      const hintButton = document.getElementById('show-quiz-hint');
      
      if (hintContainer.style.display === 'block') {
        hintContainer.style.display = 'none';
        hintButton.innerHTML = '<i class="bi bi-lightbulb"></i> Show Hint';
      } else {
        hintContainer.style.display = 'block';
        hintButton.innerHTML = '<i class="bi bi-lightbulb-fill"></i> Hide Hint';
      }
    }

    // Function for running quiz code
    async function runQuizCode() {
      const runButton = document.getElementById('run-quiz-code');
      const submitButton = document.getElementById('submit-quiz-answer');
      const outputDiv = document.getElementById('quiz-output');
      const outputContent = outputDiv.querySelector('pre');
      const currentQuestion = quizQuestions[currentQuizIndex];
      const code = quizCodeEditor.getValue();
      
      // Show loading state
      runButton.disabled = true;
      runButton.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Running...';
      outputDiv.style.display = 'block';
      outputContent.textContent = 'Running your code...';
      
      // Hide submit button initially
      submitButton.style.display = 'none';
      
      try {
        // Run the code with test cases
        const result = await executePythonCode(code, currentQuestion.test_cases || []);
        
        // Process and display results
        if (result.error) {
          outputContent.textContent = `Error: ${result.error}`;
          outputContent.style.color = 'red';
          submitButton.style.display = 'none'; // Keep submit hidden if error
        } else {
          // Process raw output
          let output = '';
          let allTestsPassed = true;
          
          // Handle raw output, ignoring lone "None"
          if (result.raw_output) {
            const rawOutput = result.raw_output.trim();
            if (rawOutput !== "None") {
              output = rawOutput + '\n';
            }
          }
          
          // Add test results if available
          if (result.results && result.results.length > 0) {
            if (output) output += '\n';
            output += '--- Test Results ---\n';
            
            result.results.forEach((res, i) => {
              const testCase = currentQuestion.test_cases[i];
              const expectedOutput = String(testCase.expected).trim();
              const actualOutput = String(res.output).trim();
              const passed = expectedOutput === actualOutput;
              
              if (!passed) allTestsPassed = false;
              
              output += `Test ${i + 1}: ${passed ? 'PASSED' : 'FAILED'}\n`;
              if (!passed) {
                output += `  Expected: ${expectedOutput}\n`;
                output += `  Got: ${actualOutput}\n`;
              }
            });
          }
          
          // If there's still no output, show success message
          if (!output.trim()) {
            output = "Code executed successfully.";
          }
          
          outputContent.textContent = output;
          outputContent.style.color = '';
          
          // Show submit button only if all tests pass
          submitButton.style.display = allTestsPassed ? 'inline-block' : 'none';
        }
      } catch (error) {
        outputContent.textContent = `Error running code: ${error.message}`;
        outputContent.style.color = 'red';
        submitButton.style.display = 'none'; // Keep submit hidden if error
      } finally {
        // Reset button
        runButton.disabled = false;
        runButton.innerHTML = '<i class="bi bi-play-fill"></i> Run Code';
      }
    }

    async function submitQuizAnswer() {
      const submitButton = document.getElementById('submit-quiz-answer');
      const resultDiv = document.getElementById('quiz-result');
      const currentQuestion = quizQuestions[currentQuizIndex];
      const userCode = quizCodeEditor.getValue();
      
      // Show loading state
      submitButton.disabled = true;
      submitButton.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Submitting...';
      
      try {
        // Run tests to verify the answer
        const testResult = await executePythonCode(userCode, currentQuestion.test_cases || []);
        
        // Determine if the answer is correct
        let isCorrect = false;
        if (testResult.results && testResult.results.length > 0) {
          // Check if all tests pass using proper string comparison
          isCorrect = testResult.results.every((res, i) => {
            const testCase = currentQuestion.test_cases[i];
            return String(res.output).trim() === String(testCase.expected).trim();
          });
        } else if (!testResult.error && testResult.raw_output) {
          // If no test cases but code runs without error, consider it correct
          isCorrect = true;
        }

        // Submit to server
        const submitResponse = await fetch('https://sanghamitra-learnworld.vercel.app/api/finger-exercise/submit', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'include',
          body: JSON.stringify({
            username: window.username,
            email: window.email,
            topic: 'python_basics',
            questionId: currentQuestion.id,
            userAnswer: userCode,
            isCorrect
          })
        });
        
        if (!submitResponse.ok) {
          throw new Error(`Server responded with status: ${submitResponse.status}`);
        }
        
        // If answer is correct, add it to our local answered questions list
        if (isCorrect) {
          answeredQuestionIds.push(currentQuestion.id);
        }
        
        // Show result
        resultDiv.className = isCorrect 
          ? 'quiz-result alert alert-success' 
          : 'quiz-result alert alert-warning';
        
        // Handle next button visibility and result message
        handleQuizResultDisplay(isCorrect, resultDiv);
        
      } catch (error) {
        console.error('Error submitting answer:', error);
        resultDiv.className = 'quiz-result alert alert-danger';
        resultDiv.innerHTML = `<strong>Submission Error:</strong> ${error.message}`;
        resultDiv.style.display = 'block';
      } finally {
        // Reset button
        submitButton.disabled = false;
        submitButton.innerHTML = '<i class="bi bi-check-circle"></i> Submit Answer';
      }
    }

    function handleQuizResultDisplay(isCorrect, resultDiv) {
      // Check if we have the next question button element
      let nextButton = document.getElementById('next-question');
      const submitButton = document.getElementById('submit-quiz-answer');
  
      // Disable submit button after submission
      submitButton.disabled = true;
      submitButton.style.display = 'none';
      
      if (isCorrect) {
        // Create next button if it doesn't exist
        if (!nextButton) {
          nextButton = document.createElement('button');
          nextButton.id = 'next-question';
          nextButton.className = 'btn btn-primary ml-2';
          nextButton.innerHTML = '<i class="bi bi-arrow-right"></i> Next Question';
          nextButton.addEventListener('click', goToNextQuestion);
          
          // Add it after the submit button
          const submitButton = document.getElementById('submit-quiz-answer');
          submitButton.parentNode.insertBefore(nextButton, submitButton.nextSibling);
        }
        
        // Only show next button if there are more questions
        if (currentQuizIndex < quizQuestions.length - 1) {
          nextButton.style.display = 'inline-block';
          resultDiv.innerHTML = '<strong>Correct!</strong> Great job! Your solution has been submitted. Click "Next Question" to continue.';
        } else {
          // Last question
          resultDiv.innerHTML = '<strong>Correct!</strong> Congratulations! You\'ve completed all the practice questions.';
        }
      } else {
        // Hide next button if answer is incorrect
        if (nextButton) {
          nextButton.style.display = 'none';
        }
        resultDiv.innerHTML = '<strong>Keep Trying!</strong> Your solution has been recorded, but it\'s not quite right yet.';
      }
      
      resultDiv.style.display = 'block';
    }

    // Function to reset all questions for the user (optional feature)
    async function resetAllQuestions() {
      try {
        const response = await fetch('https://sanghamitra-learnworld.vercel.app/api/finger-exercise/reset', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'include',
          body: JSON.stringify({
            email: window.email,
            topic: 'python_basics'
          })
        });
        
        if (!response.ok) {
          throw new Error(`Failed to reset questions: ${response.status}`);
        }
        
        // Reload the page to restart
        window.location.reload();
      } catch (error) {
        console.error('Error resetting questions:', error);
        alert(`Failed to reset questions: ${error.message}`);
      }
    }

    // Initialize everything after the page loads
    document.addEventListener("DOMContentLoaded", () => {
      // Initialize code editors for regular examples
      initCodeEditors();
      
      // Fetch user session info and start the quiz
      fetchSessionInfo();
      
      // Add question counter if it doesn't exist
      if (!document.getElementById('question-counter')) {
        const quizTitleElement = document.getElementById('quiz-title');
        if (quizTitleElement) {
          const counterElement = document.createElement('div');
          counterElement.id = 'question-counter';
          counterElement.className = 'text-muted mb-2';
          counterElement.textContent = 'Loading questions...';
          quizTitleElement.parentNode.insertBefore(counterElement, quizTitleElement);
        }
      }
    });

  </script>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/vendor/php-email-form/validate.js"></script>
  <script src="../assets/vendor/aos/aos.js"></script>
  <script src="../assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="../assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="../assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Main JS File -->
  <script src="../assets/js/main.js"></script>
  <script src="navbar.js"></script>
</body>
</html>
